<?php 

	/**
	 * 
	 */
	class view_newpost
	{
		private $category;

		function __construct()
		{
			$this->category = new controller_category();
		}

		public function test()
		{
			echo "calling from newpost view <br>";
		}

		public function loadpage($error = null)
		{

			$list_categ = $this->category->getall();

			?>

			<div class="container shadow" id="page-content">
			  <div class="h1 text-center text-white mt-3">Add new Post</div>
			  <form class="container p-3" method="POST" enctype="multipart/form-data">
			  	<?php if(isset($error)): ?>
			  		<div class="alert alert-dark alert-dismissible fade show" role="alert">
			  		  <strong>Error</strong> malware has not been posted. 
			  		  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
			  		    <span aria-hidden="true">&times;</span>
			  		  </button>
			  		</div>
			  	<?php endif; ?>
			      <div class="form-group">
			        <label for="exampleFormControlInput1" class="text-white">Malware Name</label>
			        <input type="text" class="form-control" id="exampleFormControlInput1" placeholder="Malware Name" name="malwarename">
			      </div>

			      <div class="row">
			        <div class="col-md-6">
			          <div class="form-group">
			            <label class="text-white" for="exampleFormControlSelect1">Threat level</label>
			            <select class="form-control" id="exampleFormControlSelect1" name="threatlvl">
			              <option value="LVL1">LVL 1</option>
			              <option value="LVL2">LVL 2</option>
			              <option value="LVL3">LVL 3</option>
			              <option value="LVL4">LVL 4</option>
			              <option value="LVL5">LVL 5</option>
			            </select>
			          </div>
			        </div>
			        <div class="col-md-6">
			          <div class="form-group">
			            <label class="text-white" for="exampleFormControlSelect1">Category</label>
			            <select class="form-control" id="exampleFormControlSelect1" name="categ">
			            	<?php foreach($list_categ as $categ): ?>
			            		<option value="<?php echo($categ->id_categ) ?>"><?php echo $categ->nom_categ; ?></option>
			            	<?php endforeach; ?>
			            </select>
			          </div>
			        </div>
			      </div>

			      <div class="form-group custom-file my-3">
			        <input type="file" class="custom-file-input" id="customFile" name="upload">
			        <label class="custom-file-label" for="customFile">Malware Source Code file</label>
			      </div>

			      <div class="form-group">
			        <label class="text-white" for="exampleFormControlTextarea1">Description</label>
			        <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" name="description"></textarea>
			      </div>

			      <div class="form-group text-center">
			      	<button class="btn btn-secondary px-4" name="newpost">Submit</button>
			      </div>
			    </form>

			</div>
			
			<?php
		}

	}


 ?>