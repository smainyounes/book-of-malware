<?php 
	
	// page name
	$page = "addnew";

	// autoloader
	include '../backend/includes/autoloader.inc.php';

	// redirect to login if not loggedin
	if (!isset($_SESSION['user'])) {
		header("Location: login.php?msg=login");
	}

	// header
	include '../backend/includes/userheader.inc.php';

	// test value 
	$test = null;

	//check if newpost is posted
	if (isset($_POST['newpost'])) {
		$post = new controller_posts();
		if ($post->addnew()) {
			header("Location: profile.php?msg=added");
		}else{
			$test = "error";
		}
	}

	//loading view
	try {
		$newpost = new view_newpost();

		$newpost->loadpage($test);

	} catch (Exception $e) {
		echo $e;
	}


	// footer
	include '../backend/includes/footer.inc.php';

 ?>