<?php 
	
	// page name
	$page = "profile";

	// autoloader
	include '../backend/includes/autoloader.inc.php';

	// header
	if (isset($_SESSION['user'])) {
		include '../backend/includes/userheader.inc.php';
	}else{
		if (!isset($_GET['id'])) {
			header("Location: index.php");
		}
		include '../backend/includes/header.inc.php';
	}

	if (isset($_GET['id'])) {
		$user = new controller_user();
		if (!$user->exists($_GET['id'])) {
			header("Location: index.php");
		}
	}
	
	if (isset($_POST['delete'])) {
		$posts = new controller_posts();
		$result = $posts->delete($_POST['id']);

		//loading view
		try {
			$profile = new view_profile();

			$profile->loadpage($result);

		} catch (Exception $e) {
			echo $e;
		}

	}else{
		//loading view
		try {
			$profile = new view_profile();

			$profile->loadpage();

		} catch (Exception $e) {
			echo $e;
		}
	}

	// footer
	include '../backend/includes/footer.inc.php';

 ?>